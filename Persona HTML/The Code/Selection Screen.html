<!DOCTYPE html>
<html>

<head>

<meta charset="UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" type="text/css" href="Selection Screen.css">

<title>Selection Screen</title>

</head>

<body onload="randomBackground();resetSelections()">

<video loop id="videoPlayer">
</video>

<audio loop id="audio">
</audio>

<div id="characters">

<a id="charPrompt">Select your character!</a>

<a onclick="selectedCharacter()"><img id="Aigis" src="../Characters/Aigis/Aigis.png"/></a>
<a onclick="selectedCharacter()"><img id="Chie" src="../Characters/Chie Satonaka/Chie.png"/></a>
<a onclick="selectedCharacter()"><img id="Kuma" src="../Characters/Kuma/Kuma.gif"/></a>

<a onclick="selectedCharacter()"><img id="Labrys" src="../Characters/Labrys/Labrys.png"/></a>
<a onclick="selectedCharacter()"><img id="Mitsuru" src="../Characters/Mitsuru Kirijo/Mitsuru.png"/></a>
<a onclick="selectedCharacter()"><img id="Sho" src="../Characters/Sho Minazuki/Sho2.png"/></a>

<a onclick="selectedCharacter()"><img id="Yosuke" src="../Characters/Yosuke Hanamura/Yosuke.png"/></a>
<a onclick="selectedCharacter()"><img id="Yukiko" src="../Characters/Yukiko Amagi/Yukiko.png"/></a>
<a onclick="selectedCharacter()"><img id="Yu" src="../Characters/Yu Narukami/Yu3.png"/></a>

</div>

<div id="charNames">

<h2 id="AigisIconName">Aigis</h2>
<h2 id="ChieIconName">Chie</h2>
<h2 id="KumaIconName">Kuma</h2>
<h2 id="LabrysIconName">Labrys</h2>
<h2 id="MitsuruIconName">Mitsuru</h2>
<h2 id="ShoIconName">Sho</h2>
<h2 id="YosukeIconName">Yosuke</h2>
<h2 id="YukikoIconName">Yukiko</h2>
<h2 id="YuIconName">Yu</h2>

</div>

<div>

<h1 id="stagesPrompt">Select A Stage!</h1>

<div id="stages">
<img onclick="stageSelect()" id="Entrance" src="../Stages/Entrance.jpg"/>
<img onclick="stageSelect()" id="Gym" src="../Stages/Gym.jpg"/>
<img onclick="stageSelect()" id="Hallway" src="../Stages/Hallway.jpg"/>
<img onclick="stageSelect()" id="Lockers" src="../Stages/Lockers.jpg"/>
<img onclick="stageSelect()" id="Music-Room" src="../Stages/Music Room.jpg"/>
<img onclick="stageSelect()" id="P4" src="../Stages/P4.jpg"/>
</div>

<img id="rain" onclick="selectedStage()" src="../Title Screens/rain.gif"/>

</div>

<h1 id="difficultyPrompt">Select a Difficulty!</h1>

<div>
<button id="easy" onclick="selectedDifficulty()">Easy</button>
<button id="normal" onclick="selectedDifficulty()">Normal</button>
<button id="hard" onclick="selectedDifficulty()">Hard</button>
</div>

<button id="loadSelections" onclick="loadSelections()">Let's Go!</button>

<script>

  let backgrounds = ["../Title Screens/P3 Dancing.mp4","../Title Screens/P4 Dancing.mp4","../Title Screens/P5 Dancing.mp4"];
  let bgm = ["../OST/P3 Dancing.mp3","../OST/P4 Dancing.mp3","../OST/P5 Dancing.mp3"];

  let audio = document.getElementById("audio");
  let videoPlayer = document.getElementById("videoPlayer");

  let randomInt = Math.floor(Math.random() * 3);

  let characterActive = false;
  let stageActive = false;

  let beginGame = document.getElementById("loadSelections");

  /*Character Animations*/
  let AigisAnim = ["../Characters/Aigis/Aigis-Idle.gif"];
  let ChieAnim = ["../Characters/Chie Satonaka/Chie-Idle.gif"];
  let KumaAnim = ["../Characters/Kuma/Kuma-Idle.gif"];
  let LabrysAnim = ["../Characters/Labrys/Labrys-Idle.gif"];
  let MitsuruAnim = ["../Characters/Mitsuru Kirijo/Mitsuru-Idle.gif"];
  let ShoAnim = ["../Characters/Sho Minazuki/Sho-Idle.gif"];
  let YosukeAnim = ["../Characters/Yosuke Hanamura/Yosuke-Idle.gif"];
  let YukikoAnim = ["../Characters/Yukiko Amagi/Yukiko-Idle.gif"];
  let YuAnim = ["../Characters/Yu Narukami/Yu-Narukami-Idle.gif"];

  let botAnim = [["../Characters/Aigis/Aigis-Idle.gif","../Characters/Chie Satonaka/Chie-Idle.gif","../Characters/Kuma/Kuma-Idle.gif"],
["../Characters/Labrys/Labrys-Idle.gif","../Characters/Mitsuru Kirijo/Mitsuru-Idle.gif","../Characters/Sho Minazuki/Sho-Idle.gif"],
["../Characters/Yosuke Hanamura/Yosuke-Idle.gif","../Characters/Yukiko Amagi/Yukiko-Idle.gif","../Characters/Yu Narukami/Yu-Narukami-Idle.gif"]];

  let currentAnim = "";
  let currentBotAnim = "";

  /*End of character animations*/

  let stage = ["../Stages/Entrance.jpg","../Stages/Gym.jpg","../Stages/Hallway.jpg","../Stages/Lockers.jpg","../Stages/Music Room.jpg","../Stages/P4.jpg"];
  let selectedStage = "";

  function randomBackground()
  {
    videoPlayer.src = backgrounds[randomInt];
    videoPlayer.muted = true;
    videoPlayer.play();
    videoPlayer.style.minHeight = "100%";
    videoPlayer.style.minWidth = "100%";

    audio.src = backgrounds[randomInt];
    audio.play();
  }

  function generateBot()
  {
    let randomRow = Math.floor(Math.random() * 3);
    let randomColumn = Math.floor(Math.random() * 3);
    currentBotAnim = botAnim[randomRow][randomColumn];
  }

  function selectedCharacter()
  {
    let Aigis = document.getElementById("Aigis");
    let Chie = document.getElementById("Chie");
    let Kuma = document.getElementById("Kuma");
    let Labrys = document.getElementById("Labrys");
    let Mitsuru = document.getElementById("Mitsuru");
    let Sho = document.getElementById("Sho");
    let Yosuke = document.getElementById("Yosuke");
    let Yukiko = document.getElementById("Yukiko");
    let Yu = document.getElementById("Yu");

        Aigis.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "10px 10px lime";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Aigis-Save", AigisAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Aigis-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Chie.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "10px 10px lime";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Chie-Save", ChieAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Chie-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Kuma.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "10px 10px lime";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Kuma-Save", KumaAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Kuma-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Labrys.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "10px 10px lime";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Labrys-Save", LabrysAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Labrys-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Mitsuru.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "10px 10px lime";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Mitsuru-Save", MitsuruAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Mitsuru-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Sho.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "10px 10px lime";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Sho-Save", ShoAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Sho-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Yosuke.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "10px 10px lime";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Yosuke-Save", YosukeAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Yosuke-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Yukiko.addEventListener("click", ()=>{

          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "10px 10px lime";
              Yu.style.boxShadow = "";

              sessionStorage.setItem("Yukiko-Save", YukikoAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Yukiko-Save");
          }
          else
          {
              characterActive = false;
          }
        });

        Yu.addEventListener("click", ()=>{
          if(characterActive === false)
          {
              characterActive = true;
              Aigis.style.boxShadow = "";
              Chie.style.boxShadow = "";
              Kuma.style.boxShadow = "";
              Labrys.style.boxShadow = "";
              Mitsuru.style.boxShadow = "";
              Sho.style.boxShadow = "";
              Yosuke.style.boxShadow = "";
              Yukiko.style.boxShadow = "";
              Yu.style.boxShadow = "10px 10px lime";

              sessionStorage.setItem("Yu-Save", YuAnim[0].toString() );
              currentAnim = sessionStorage.getItem("Yu-Save");
          }
          else
          {
              characterActive = false;
          }
        });






  }

  function selectedDifficulty()
  {
    let easy = document.getElementById("easy");
    let normal = document.getElementById("normal");
    let hard = document.getElementById("hard");

    easy.addEventListener("click", ()=>{
      if(difficultyActive === false)
      {
          difficultyActive = true;
      }
      else
      {
          difficultyActive = false;
      }
    });

    normal.addEventListener("click", ()=>{
      if(difficultyActive === false)
      {
          difficultyActive = true;
      }
      else
      {
          difficultyActive = false;
      }
    });

    hard.addEventListener("click", ()=>{
      if(difficultyActive === false)
      {
          difficultyActive = true;
      }
      else
      {
          difficultyActive = false;
      }
    });

  }

  function stageSelect()
  {
    let entrance = document.getElementById("Entrance");
    let gym = document.getElementById("Gym");
    let hallway = document.getElementById("Hallway");
    let lockers = document.getElementById("Lockers");
    let musicRoom = document.getElementById("Music-Room");
    let p4 = document.getElementById("P4");

    entrance.addEventListener("click", ()=>{
      if(stageActive === false)
      {
          characterActive = true;
          entrance.style.boxShadow = "10px 10px lime";
          gym.style.boxShadow = "";
          hallway.style.boxShadow = "";
          lockers.style.boxShadow = "";
          musicRoom.style.boxShadow = "";
          p4.style.boxShadow = "";

          sessionStorage.setItem("Entrance", stage[0].toString());
          selectedStage = sessionStorage.getItem("Entrance");
      }
      else
      {
          stageActive = false;
      }
    });

    gym.addEventListener("click", ()=>{
      if(stageActive === false)
      {
          characterActive = true;
          entrance.style.boxShadow = "";
          gym.style.boxShadow = "10px 10px lime";
          hallway.style.boxShadow = "";
          lockers.style.boxShadow = "";
          musicRoom.style.boxShadow = "";
          p4.style.boxShadow = "";

          sessionStorage.setItem("Gym", stage[1].toString());
          selectedStage = sessionStorage.getItem("Gym");
      }
      else
      {
          stageActive = false;
      }
    });

    hallway.addEventListener("click", ()=>{
      if(stageActive === false)
      {
          characterActive = true;
          entrance.style.boxShadow = "";
          gym.style.boxShadow = "";
          hallway.style.boxShadow = "10px 10px lime";
          lockers.style.boxShadow = "";
          musicRoom.style.boxShadow = "";
          p4.style.boxShadow = "";

          sessionStorage.setItem("Hallway", stage[2].toString());
          selectedStage = sessionStorage.getItem("Hallway");
      }
      else
      {
          stageActive = false;
      }
    });

    lockers.addEventListener("click", ()=>{
      if(stageActive === false)
      {
          characterActive = true;
          entrance.style.boxShadow = "";
          gym.style.boxShadow = "";
          hallway.style.boxShadow = "";
          lockers.style.boxShadow = "10px 10px lime";
          musicRoom.style.boxShadow = "";
          p4.style.boxShadow = "";

          sessionStorage.setItem("Lockers", stage[3].toString());
          selectedStage = sessionStorage.getItem("Lockers");
      }
      else
      {
          stageActive = false;
      }
    });

    musicRoom.addEventListener("click", ()=>{
      if(stageActive === false)
      {
          characterActive = true;
          entrance.style.boxShadow = "";
          gym.style.boxShadow = "";
          hallway.style.boxShadow = "";
          lockers.style.boxShadow = "";
          musicRoom.style.boxShadow = "10px 10px lime";
          p4.style.boxShadow = "";

          sessionStorage.setItem("Music_Room", stage[4].toString());
          selectedStage = sessionStorage.getItem("Music_Room");
      }
      else
      {
          stageActive = false;
      }
    });

    p4.addEventListener("click", ()=>{
      if(stageActive === false)
      {
          characterActive = true;
          entrance.style.boxShadow = "";
          gym.style.boxShadow = "";
          hallway.style.boxShadow = "";
          lockers.style.boxShadow = "";
          musicRoom.style.boxShadow = "";
          p4.style.boxShadow = "10px 10px lime";

          sessionStorage.setItem("P4", stage[5].toString());
          selectedStage = sessionStorage.getItem("P4");
      }
      else
      {
          stageActive = false;
      }
    });

  }

  function loadSelections()
  {
    beginGame.addEventListener("click",()=>{

      //Clear Screen
      document.body.innerHTML = "";
      document.body.style.animation = "none";
      document.body.style.backgroundColor = "white";
      document.title = "Gameplay";

      /*Method Calls*/
      generateBot();

      //Create Selections
      var player = document.createElement("IMG");
      var bot = document.createElement("IMG");
      var stageImg = document.createElement("IMG");

      //Modify Selections
      player.setAttribute("id", "player");
      player.setAttribute("src", currentAnim);
      player.setAttribute("height", "100");
      player.setAttribute("width", "100");

      bot.setAttribute("id", "bot");
      bot.setAttribute("src", currentBotAnim);
      bot.setAttribute("height", "100");
      bot.setAttribute("width", "100");

      stageImg.setAttribute("id", "stageImg");
      stageImg.setAttribute("src", selectedStage);
      stageImg.setAttribute("height", "0%");
      stageImg.setAttribute("width", "0%");
      document.body.setAttribute("style", "background-image: url("+ selectedStage +"); background-repeat: no-repeat; background-size: cover;");

      //Load Selections
      document.body.appendChild(player);
      document.body.appendChild(bot);
      document.body.appendChild(stageImg);

    });
  }

  function resetSelections()
  {
    currentAnim = "";
    currentBotAnim = "";
    selectedStage = "";
  }

</script>

</body>

</html>
